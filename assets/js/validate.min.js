/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
(function(exports,module,define){"use strict";var validate=function(attributes,constraints,options){options=v.extend({},v.options,options);var results=v.runValidations(attributes,constraints,options),attr,validator;if(results.some((function(r){return v.isPromise(r.error)})))throw new Error("Use validate.async if you want support for promises");return validate.processValidationResults(results,options)},v=validate;v.extend=function(obj){return[].slice.call(arguments,1).forEach((function(source){for(var attr in source)obj[attr]=source[attr]})),obj},v.extend(validate,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var version=v.format("%{major}.%{minor}.%{patch}",v.version);return v.isEmpty(v.version.metadata)||(version+="+"+v.version.metadata),version}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(attributes,constraints,options){var results=[],attr,validatorName,value,validators,validator,validatorOptions,error;for(attr in(v.isDomElement(attributes)||v.isJqueryElement(attributes))&&(attributes=v.collectFormValues(attributes)),constraints)for(validatorName in value=v.getDeepObjectValue(attributes,attr),validators=v.result(constraints[attr],value,attributes,attr,options,constraints)){if(!(validator=v.validators[validatorName]))throw error=v.format("Unknown validator %{name}",{name:validatorName}),new Error(error);validatorOptions=validators[validatorName],(validatorOptions=v.result(validatorOptions,value,attributes,attr,options,constraints))&&results.push({attribute:attr,value:value,validator:validatorName,globalOptions:options,attributes:attributes,options:validatorOptions,error:validator.call(validator,value,validatorOptions,attr,attributes,options)})}return results},processValidationResults:function(errors,options){errors=v.pruneEmptyErrors(errors,options),errors=v.expandMultipleErrors(errors,options),errors=v.convertErrorMessages(errors,options);var format=options.format||"grouped";if("function"!=typeof v.formatters[format])throw new Error(v.format("Unknown format %{format}",options));return errors=v.formatters[format](errors),v.isEmpty(errors)?void 0:errors},async:function(attributes,constraints,options){var WrapErrors=(options=v.extend({},v.async.options,options)).wrapErrors||function(errors){return errors};!1!==options.cleanAttributes&&(attributes=v.cleanAttributes(attributes,constraints));var results=v.runValidations(attributes,constraints,options);return new v.Promise((function(resolve,reject){v.waitForResults(results).then((function(){var errors=v.processValidationResults(results,options);errors?reject(new WrapErrors(errors,options,attributes,constraints)):resolve(attributes)}),(function(err){reject(err)}))}))},single:function(value,constraints,options){return options=v.extend({},v.single.options,options,{format:"flat",fullMessages:!1}),v({single:value},{single:constraints},options)},waitForResults:function(results){return results.reduce((function(memo,result){return v.isPromise(result.error)?memo.then((function(){return result.error.then((function(error){result.error=error||null}))})):memo}),new v.Promise((function(r){r()})))},result:function(value){var args=[].slice.call(arguments,1);return"function"==typeof value&&(value=value.apply(null,args)),value},isNumber:function(value){return"number"==typeof value&&!isNaN(value)},isFunction:function(value){return"function"==typeof value},isInteger:function(value){return v.isNumber(value)&&value%1==0},isBoolean:function(value){return"boolean"==typeof value},isObject:function(obj){return obj===Object(obj)},isDate:function(obj){return obj instanceof Date},isDefined:function(obj){return null!=obj},isPromise:function(p){return!!p&&v.isFunction(p.then)},isJqueryElement:function(o){return o&&v.isString(o.jquery)},isDomElement:function(o){return!!o&&(!(!o.querySelectorAll||!o.querySelector)&&(!(!v.isObject(document)||o!==document)||("object"==typeof HTMLElement?o instanceof HTMLElement:o&&"object"==typeof o&&null!==o&&1===o.nodeType&&"string"==typeof o.nodeName)))},isEmpty:function(value){var attr;if(!v.isDefined(value))return!0;if(v.isFunction(value))return!1;if(v.isString(value))return v.EMPTY_STRING_REGEXP.test(value);if(v.isArray(value))return 0===value.length;if(v.isDate(value))return!1;if(v.isObject(value)){for(attr in value)return!1;return!0}return!1},format:v.extend((function(str,vals){return v.isString(str)?str.replace(v.format.FORMAT_REGEXP,(function(m0,m1,m2){return"%"===m1?"%{"+m2+"}":String(vals[m2])})):str}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(str){return v.isNumber(str)?100*str%1==0?""+str:parseFloat(Math.round(100*str)/100).toFixed(2):v.isArray(str)?str.map((function(s){return v.prettify(s)})).join(", "):v.isObject(str)?v.isDefined(str.toString)?str.toString():JSON.stringify(str):(str=""+str).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(m0,m1,m2){return m1+" "+m2.toLowerCase()})).toLowerCase()},stringifyValue:function(value,options){var prettify;return(options&&options.prettify||v.prettify)(value)},isString:function(value){return"string"==typeof value},isArray:function(value){return"[object Array]"==={}.toString.call(value)},isHash:function(value){return v.isObject(value)&&!v.isArray(value)&&!v.isFunction(value)},contains:function(obj,value){return!!v.isDefined(obj)&&(v.isArray(obj)?-1!==obj.indexOf(value):value in obj)},unique:function(array){return v.isArray(array)?array.filter((function(el,index,array){return array.indexOf(el)==index})):array},forEachKeyInKeypath:function(object,keypath,callback){if(v.isString(keypath)){var key="",i,escape=!1;for(i=0;i<keypath.length;++i)switch(keypath[i]){case".":escape?(escape=!1,key+="."):(object=callback(object,key,!1),key="");break;case"\\":escape?(escape=!1,key+="\\"):escape=!0;break;default:escape=!1,key+=keypath[i]}return callback(object,key,!0)}},getDeepObjectValue:function(obj,keypath){if(v.isObject(obj))return v.forEachKeyInKeypath(obj,keypath,(function(obj,key){if(v.isObject(obj))return obj[key]}))},collectFormValues:function(form,options){var values={},i,j,input,inputs,option,value;if(v.isJqueryElement(form)&&(form=form[0]),!form)return values;for(options=options||{},inputs=form.querySelectorAll("input[name], textarea[name]"),i=0;i<inputs.length;++i)if(input=inputs.item(i),!v.isDefined(input.getAttribute("data-ignored"))){var name=input.name.replace(/\./g,"\\\\.");value=v.sanitizeFormValue(input.value,options),"number"===input.type?value=value?+value:null:"checkbox"===input.type?input.attributes.value?input.checked||(value=values[name]||null):value=input.checked:"radio"===input.type&&(input.checked||(value=values[name]||null)),values[name]=value}for(inputs=form.querySelectorAll("select[name]"),i=0;i<inputs.length;++i)if(input=inputs.item(i),!v.isDefined(input.getAttribute("data-ignored"))){if(input.multiple)for(j in value=[],input.options)(option=input.options[j])&&option.selected&&value.push(v.sanitizeFormValue(option.value,options));else{var _val=void 0!==input.options[input.selectedIndex]?input.options[input.selectedIndex].value:"";value=v.sanitizeFormValue(_val,options)}values[input.name]=value}return values},sanitizeFormValue:function(value,options){return options.trim&&v.isString(value)&&(value=value.trim()),!1!==options.nullify&&""===value?null:value},capitalize:function(str){return v.isString(str)?str[0].toUpperCase()+str.slice(1):str},pruneEmptyErrors:function(errors){return errors.filter((function(error){return!v.isEmpty(error.error)}))},expandMultipleErrors:function(errors){var ret=[];return errors.forEach((function(error){v.isArray(error.error)?error.error.forEach((function(msg){ret.push(v.extend({},error,{error:msg}))})):ret.push(error)})),ret},convertErrorMessages:function(errors,options){var ret=[],prettify=(options=options||{}).prettify||v.prettify;return errors.forEach((function(errorInfo){var error=v.result(errorInfo.error,errorInfo.value,errorInfo.attribute,errorInfo.options,errorInfo.attributes,errorInfo.globalOptions);v.isString(error)?("^"===error[0]?error=error.slice(1):!1!==options.fullMessages&&(error=v.capitalize(prettify(errorInfo.attribute))+" "+error),error=error.replace(/\\\^/g,"^"),error=v.format(error,{value:v.stringifyValue(errorInfo.value,options)}),ret.push(v.extend({},errorInfo,{error:error}))):ret.push(errorInfo)})),ret},groupErrorsByAttribute:function(errors){var ret={};return errors.forEach((function(error){var list=ret[error.attribute];list?list.push(error):ret[error.attribute]=[error]})),ret},flattenErrorsToArray:function(errors){return errors.map((function(error){return error.error})).filter((function(value,index,self){return self.indexOf(value)===index}))},cleanAttributes:function(attributes,whitelist){function whitelistCreator(obj,key,last){return v.isObject(obj[key])?obj[key]:obj[key]=!!last||{}}function buildObjectWhitelist(whitelist){var ow={},lastObject,attr;for(attr in whitelist)whitelist[attr]&&v.forEachKeyInKeypath(ow,attr,whitelistCreator);return ow}function cleanRecursive(attributes,whitelist){if(!v.isObject(attributes))return attributes;var ret=v.extend({},attributes),w,attribute;for(attribute in attributes)w=whitelist[attribute],v.isObject(w)?ret[attribute]=cleanRecursive(ret[attribute],w):w||delete ret[attribute];return ret}return v.isObject(whitelist)&&v.isObject(attributes)?cleanRecursive(attributes,whitelist=buildObjectWhitelist(whitelist)):{}},exposeModule:function(validate,root,exports,module,define){exports?(module&&module.exports&&(exports=module.exports=validate),exports.validate=validate):(root.validate=validate,validate.isFunction(define)&&define.amd&&define([],(function(){return validate})))},warn:function(msg){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+msg)},error:function(msg){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+msg)}}),validate.validators={presence:function(value,options){if(!1!==(options=v.extend({},this.options,options)).allowEmpty?!v.isDefined(value):v.isEmpty(value))return options.message||this.message||"can't be blank"},length:function(value,options,attribute){if(v.isDefined(value)){var is=(options=v.extend({},this.options,options)).is,maximum=options.maximum,minimum=options.minimum,tokenizer,err,errors=[],length=(value=(options.tokenizer||function(val){return val})(value)).length;return v.isNumber(length)?(v.isNumber(is)&&length!==is&&(err=options.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",errors.push(v.format(err,{count:is}))),v.isNumber(minimum)&&length<minimum&&(err=options.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",errors.push(v.format(err,{count:minimum}))),v.isNumber(maximum)&&length>maximum&&(err=options.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",errors.push(v.format(err,{count:maximum}))),errors.length>0?options.message||errors:void 0):options.message||this.notValid||"has an incorrect length"}},numericality:function(value,options,attribute,attributes,globalOptions){if(v.isDefined(value)){var errors=[],name,count,checks={greaterThan:function(v,c){return v>c},greaterThanOrEqualTo:function(v,c){return v>=c},equalTo:function(v,c){return v===c},lessThan:function(v,c){return v<c},lessThanOrEqualTo:function(v,c){return v<=c},divisibleBy:function(v,c){return v%c==0}},prettify=(options=v.extend({},this.options,options)).prettify||globalOptions&&globalOptions.prettify||v.prettify;if(v.isString(value)&&options.strict){var pattern="^-?(0|[1-9]\\d*)";if(options.onlyInteger||(pattern+="(\\.\\d+)?"),pattern+="$",!new RegExp(pattern).test(value))return options.message||options.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==options.noStrings&&v.isString(value)&&!v.isEmpty(value)&&(value=+value),!v.isNumber(value))return options.message||options.notValid||this.notValid||this.message||"is not a number";if(options.onlyInteger&&!v.isInteger(value))return options.message||options.notInteger||this.notInteger||this.message||"must be an integer";for(name in checks)if(count=options[name],v.isNumber(count)&&!checks[name](value,count)){var key="not"+v.capitalize(name),msg=options[key]||this[key]||this.message||"must be %{type} %{count}";errors.push(v.format(msg,{count:count,type:prettify(name)}))}return options.odd&&value%2!=1&&errors.push(options.notOdd||this.notOdd||this.message||"must be odd"),options.even&&value%2!=0&&errors.push(options.notEven||this.notEven||this.message||"must be even"),errors.length?options.message||errors:void 0}},datetime:v.extend((function(value,options){if(!v.isFunction(this.parse)||!v.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(v.isDefined(value)){var err,errors=[],earliest=(options=v.extend({},this.options,options)).earliest?this.parse(options.earliest,options):NaN,latest=options.latest?this.parse(options.latest,options):NaN;return value=this.parse(value,options),isNaN(value)||options.dateOnly&&value%864e5!=0?(err=options.notValid||options.message||this.notValid||"must be a valid date",v.format(err,{value:arguments[0]})):(!isNaN(earliest)&&value<earliest&&(err=options.tooEarly||options.message||this.tooEarly||"must be no earlier than %{date}",err=v.format(err,{value:this.format(value,options),date:this.format(earliest,options)}),errors.push(err)),!isNaN(latest)&&value>latest&&(err=options.tooLate||options.message||this.tooLate||"must be no later than %{date}",err=v.format(err,{date:this.format(latest,options),value:this.format(value,options)}),errors.push(err)),errors.length?v.unique(errors):void 0)}}),{parse:null,format:null}),date:function(value,options){return options=v.extend({},options,{dateOnly:!0}),v.validators.datetime.call(v.validators.datetime,value,options)},format:function(value,options){(v.isString(options)||options instanceof RegExp)&&(options={pattern:options});var message=(options=v.extend({},this.options,options)).message||this.message||"is invalid",pattern=options.pattern,match;if(v.isDefined(value))return v.isString(value)?(v.isString(pattern)&&(pattern=new RegExp(options.pattern,options.flags)),(match=pattern.exec(value))&&match[0].length==value.length?void 0:message):message},inclusion:function(value,options){if(v.isDefined(value)&&(v.isArray(options)&&(options={within:options}),options=v.extend({},this.options,options),!v.contains(options.within,value))){var message=options.message||this.message||"^%{value} is not included in the list";return v.format(message,{value:value})}},exclusion:function(value,options){if(v.isDefined(value)&&(v.isArray(options)&&(options={within:options}),options=v.extend({},this.options,options),v.contains(options.within,value))){var message=options.message||this.message||"^%{value} is restricted";return v.isString(options.within[value])&&(value=options.within[value]),v.format(message,{value:value})}},email:v.extend((function(value,options){var message=(options=v.extend({},this.options,options)).message||this.message||"is not a valid email";if(v.isDefined(value))return v.isString(value)&&this.PATTERN.exec(value)?void 0:message}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(value,options,attribute,attributes,globalOptions){if(v.isDefined(value)){v.isString(options)&&(options={attribute:options});var message=(options=v.extend({},this.options,options)).message||this.message||"is not equal to %{attribute}";if(v.isEmpty(options.attribute)||!v.isString(options.attribute))throw new Error("The attribute must be a non empty string");var otherValue=v.getDeepObjectValue(attributes,options.attribute),comparator=options.comparator||function(v1,v2){return v1===v2},prettify=options.prettify||globalOptions&&globalOptions.prettify||v.prettify;return comparator(value,otherValue,options,attribute,attributes)?void 0:v.format(message,{attribute:prettify(options.attribute)})}},url:function(value,options){if(v.isDefined(value)){var message=(options=v.extend({},this.options,options)).message||this.message||"is not a valid url",schemes=options.schemes||this.schemes||["http","https"],allowLocal=options.allowLocal||this.allowLocal||!1,allowDataUrl=options.allowDataUrl||this.allowDataUrl||!1;if(!v.isString(value))return message;var regex="^(?:(?:"+schemes.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",tld="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",mediaType,urlchar,dataurl,PATTERN;if(allowLocal?tld+="?":regex+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",regex+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+tld+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",allowDataUrl)regex="(?:"+regex+")|(?:^"+("data:(?:"+"\\w+\\/[-+.\\w]+(?:;[\\w=]+)*"+")?(?:;base64)?,"+"[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*")+"$)";return new RegExp(regex,"i").exec(value)?void 0:message}},type:v.extend((function(value,originalOptions,attribute,attributes,globalOptions){if(v.isString(originalOptions)&&(originalOptions={type:originalOptions}),v.isDefined(value)){var options=v.extend({},this.options,originalOptions),type=options.type,check;if(!v.isDefined(type))throw new Error("No type was specified");if(check=v.isFunction(type)?type:this.types[type],!v.isFunction(check))throw new Error("validate.validators.type.types."+type+" must be a function.");if(!check(value,options,attribute,attributes,globalOptions)){var message=originalOptions.message||this.messages[type]||this.message||options.message||(v.isFunction(type)?"must be of the correct type":"must be of type %{type}");return v.isFunction(message)&&(message=message(value,originalOptions,attribute,attributes,globalOptions)),v.format(message,{attribute:v.prettify(attribute),type:type})}}}),{types:{object:function(value){return v.isObject(value)&&!v.isArray(value)},array:v.isArray,integer:v.isInteger,number:v.isNumber,string:v.isString,date:v.isDate,boolean:v.isBoolean},messages:{}})},validate.formatters={detailed:function(errors){return errors},flat:v.flattenErrorsToArray,grouped:function(errors){var attr;for(attr in errors=v.groupErrorsByAttribute(errors))errors[attr]=v.flattenErrorsToArray(errors[attr]);return errors},constraint:function(errors){var attr;for(attr in errors=v.groupErrorsByAttribute(errors))errors[attr]=errors[attr].map((function(result){return result.validator})).sort();return errors}},validate.exposeModule(validate,this,exports,module,define)}).call(this,"undefined"!=typeof exports?exports:null,"undefined"!=typeof module?module:null,"undefined"!=typeof define?define:null);